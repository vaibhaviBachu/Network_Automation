<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Topologies View - Topology Visualization</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/nodes.css">
    <link rel="stylesheet" href="css/links.css">
    <link rel="stylesheet" href="css/panel.css">
    <link rel="stylesheet" href="css/legend.css">
    <link rel="stylesheet" href="css/lists.css">
    <link rel="stylesheet" href="css/items.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/table.css">
    <link rel="stylesheet" href="css/scrollbar.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <!-- Header Background Illustration -->
            <svg class="header-illustration" viewBox="0 0 1920 60" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="headerNodeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#0ea5e9;stop-opacity:0.3" />
                        <stop offset="100%" style="stop-color:#0284c7;stop-opacity:0.2" />
                    </linearGradient>
                </defs>
                <!-- Decorative network lines -->
                <path d="M 0,30 Q 200,10 400,30 T 800,30" fill="none" stroke="rgba(14, 165, 233, 0.15)" stroke-width="1.5"/>
                <path d="M 1920,30 Q 1720,50 1520,30 T 1120,30" fill="none" stroke="rgba(14, 165, 233, 0.15)" stroke-width="1.5"/>

                <!-- Small animated dots -->
                <circle cx="200" cy="20" r="2" fill="rgba(14, 165, 233, 0.5)">
                    <animate attributeName="opacity" values="0.3;1;0.3" dur="3s" repeatCount="indefinite"/>
                </circle>
                <circle cx="600" cy="25" r="2" fill="rgba(14, 165, 233, 0.5)">
                    <animate attributeName="opacity" values="0.3;1;0.3" dur="4s" repeatCount="indefinite"/>
                </circle>
                <circle cx="1300" cy="40" r="2" fill="rgba(14, 165, 233, 0.5)">
                    <animate attributeName="opacity" values="0.3;1;0.3" dur="3.5s" repeatCount="indefinite"/>
                </circle>
                <circle cx="1700" cy="35" r="2" fill="rgba(14, 165, 233, 0.5)">
                    <animate attributeName="opacity" values="0.3;1;0.3" dur="4.5s" repeatCount="indefinite"/>
                </circle>

                <!-- Small node icons on edges -->
                <circle cx="50" cy="30" r="3" fill="url(#headerNodeGradient)"/>
                <circle cx="1870" cy="30" r="3" fill="url(#headerNodeGradient)"/>
            </svg>

            <div class="header-left">
                <div class="header-title">
                    <h1>Topologies View</h1>
                    <p class="header-subtitle">Topology Visualization Browser</p>
                </div>
            </div>
            <div class="header-right">
                <div class="controls">
                    <label for="topology-select">Select Topology:</label>
                    <select id="topology-select">
                        <option value="">-- Select a Topology --</option>
                    </select>
                    <button id="refresh-btn" title="Refresh">&#x21BB;</button>
                </div>
            </div>
        </header>

        <main>
            <div class="topology-view">
                <div class="zoom-controls">
                    <button id="zoom-in-btn" title="Zoom In">+</button>
                    <span id="zoom-level">100%</span>
                    <button id="zoom-out-btn" title="Zoom Out">-</button>
                    <button id="zoom-reset-btn" title="Reset Zoom">Reset</button>
                    <span class="control-divider"></span>
                    <select id="layout-select" title="Select Layout">
                        <option value="map">Map</option>
                        <option value="hierarchical">Hierarchical</option>
                        <option value="circular">Circular</option>
                        <option value="radial">Radial</option>
                        <option value="force">Force Directed</option>
                    </select>
                </div>
                <div id="map-container">
                    <!-- WebGL Canvas (primary renderer) -->
                    <canvas id="webgl-canvas"></canvas>
                    <!-- Fallback SVG overlay (hidden when WebGL is active) -->
                    <img id="world-map" src="resources/world.svg" alt="World Map" style="display: none;">
                    <svg id="overlay-svg" viewBox="0 0 2000 857" preserveAspectRatio="none" style="display: none;">
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#0ea5e9" />
                            </marker>
                            <marker id="arrowhead-bi" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#00c853" />
                            </marker>
                        </defs>
                    </svg>
                </div>
            </div>

            <div class="info-panel">
                <div class="panel-section topology-header">
                    <h3 id="topology-name">Topology</h3>
                    <div id="topology-info" class="topology-summary">
                        <p class="placeholder">Select a topology to view details</p>
                    </div>
                </div>

                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="nodes">
                        Nodes <span id="node-count" class="tab-count">0</span>
                    </button>
                    <button class="tab-btn" data-tab="links">
                        Links <span id="link-count" class="tab-count">0</span>
                    </button>
                    <button class="tab-btn" data-tab="legend">
                        Legend
                    </button>
                </div>

                <div class="tab-content">
                    <div id="tab-nodes" class="tab-pane active">
                        <div id="nodes-list" class="scrollable-list">
                            <p class="placeholder">No nodes to display</p>
                        </div>
                    </div>

                    <div id="tab-links" class="tab-pane">
                        <div id="links-list" class="scrollable-list">
                            <p class="placeholder">No links to display</p>
                        </div>
                    </div>

                    <div id="tab-legend" class="tab-pane">
                        <div class="legend">
                            <div class="legend-section">
                                <div class="legend-title">Elements</div>
                                <div class="legend-item">
                                    <span class="node-icon"></span>
                                    <span>Node</span>
                                </div>
                            </div>
                            <div class="legend-section">
                                <div class="legend-title">Direction</div>
                                <div class="legend-item">
                                    <span class="link-line direction-invalid"></span>
                                    <span>Invalid</span>
                                </div>
                                <div class="legend-item">
                                    <span class="link-line direction-aside"></span>
                                    <span>A &#x2192; Z</span>
                                </div>
                                <div class="legend-item">
                                    <span class="link-line direction-zside"></span>
                                    <span>Z &#x2192; A</span>
                                </div>
                                <div class="legend-item">
                                    <span class="link-line direction-bi"></span>
                                    <span>A &#x2194; Z</span>
                                </div>
                            </div>
                            <div class="legend-section">
                                <div class="legend-title">Status</div>
                                <div class="legend-item">
                                    <span class="link-line status-legend-up"></span>
                                    <span>Up</span>
                                </div>
                                <div class="legend-item">
                                    <span class="link-line status-legend-down"></span>
                                    <span>Down</span>
                                </div>
                                <div class="legend-item">
                                    <span class="link-line status-legend-partial"></span>
                                    <span>Partial</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div id="status-bar">Ready</div>
        </footer>
    </div>

    <!-- Link Details Modal -->
    <div id="link-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Link Details</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Link details will be populated here -->
            </div>
        </div>
    </div>

    <!-- WebGL Scripts -->
    <script src="webgl/shaders.js"></script>
    <script src="webgl/webgl-renderer.js"></script>
    <script src="webgl/webgl-camera.js"></script>
    <script src="webgl/webgl-nodes.js"></script>
    <script src="webgl/webgl-links.js"></script>
    <script src="webgl/webgl-icons.js"></script>
    <script src="webgl/webgl-picking.js"></script>
    <script src="webgl/webgl-topology.js"></script>
    <!-- Core Scripts -->
    <script src="topology-core.js"></script>
    <script src="topology-data.js"></script>
    <script src="topology-map.js"></script>
    <script src="topology-ui.js"></script>
    <script src="app.js"></script>
</body>
</html>
