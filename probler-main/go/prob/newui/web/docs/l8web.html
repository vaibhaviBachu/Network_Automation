<!--
 Copyright (c) 2025 Sharon Aicler (saichler@gmail.com)

 Layer 8 Ecosystem is licensed under the Apache License, Version 2.0.
 You may obtain a copy of the License at:

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layer 8 Web Services - Advanced Web Infrastructure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #00a8ff;
            --secondary-color: #00d4aa;
            --accent-color: #ff6b6b;
            --dark-bg: #0f1419;
            --light-bg: #ffffff;
            --text-dark: #1a1a1a;
            --text-light: #f0f0f0;
            --gradient-1: linear-gradient(135deg, #00a8ff 0%, #00d4aa 100%);
            --gradient-2: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            --gradient-3: linear-gradient(135deg, #00d4aa 0%, #00a8ff 100%);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            overflow-x: hidden;
        }

        /* Parallax Base Styles */
        .parallax-container {
            position: relative;
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .parallax-layer {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 120%;
        }

        .parallax-bg {
            background: var(--gradient-1);
            transform: translateZ(-2px) scale(3);
        }

        .parallax-mid {
            transform: translateZ(-1px) scale(2);
        }

        .parallax-front {
            transform: translateZ(0);
        }

        /* Full-page Hero Header */
        .hero-header {
            height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gradient-2);
            overflow: hidden;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            color: white;
            padding: 2rem;
            animation: fadeInUp 1s ease-out;
        }

        .hero-title {
            font-size: clamp(2.5rem, 8vw, 5rem);
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: -0.02em;
        }

        .hero-subtitle {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            margin-bottom: 2rem;
            opacity: 0.95;
            font-weight: 300;
        }

        /* Custom SVG Illustrations */
        .illustration-network {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0.1;
        }

        .illustration-float {
            position: absolute;
            animation: float 6s ease-in-out infinite;
        }

        .illustration-1 {
            top: 10%;
            right: 10%;
            animation-delay: 0s;
        }

        .illustration-2 {
            bottom: 20%;
            left: 5%;
            animation-delay: 2s;
        }

        .illustration-3 {
            top: 50%;
            right: 5%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        /* Navigation */
        .nav-container {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(255, 255, 255, 0);
            backdrop-filter: blur(0px);
            transition: all 0.3s ease;
            padding: 1.5rem 0;
        }

        .nav-container.scrolled {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-container.scrolled .nav-links a {
            color: var(--text-dark);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Parallax Sections */
        .parallax-section {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        .parallax-content {
            position: relative;
            z-index: 1;
            background: rgba(255, 255, 255, 0.95);
            padding: 4rem;
            border-radius: 20px;
            max-width: 1000px;
            margin: 2rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        /* Features Grid */
        .features-container {
            padding: 5rem 2rem;
            background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%);
        }

        .features-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-1);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            margin-bottom: 1.5rem;
        }

        .feature-card h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }

        /* Architecture Section */
        .architecture-section {
            background: var(--gradient-3);
            color: white;
            padding: 5rem 2rem;
            position: relative;
            overflow: hidden;
        }

        .architecture-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .architecture-diagram {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 20px;
            margin: 2rem 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .architecture-diagram pre {
            color: white;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* Code Examples */
        .code-tabs {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin: 2rem 0;
        }

        .tab-buttons {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            flex-wrap: wrap;
        }

        .tab-button {
            flex: 1;
            min-width: 120px;
            padding: 1rem;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-button.active {
            color: var(--primary-color);
            background: white;
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-color);
        }

        .tab-content {
            display: none;
            padding: 2rem;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 10px;
            overflow-x: auto;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* CTA Section */
        .cta-section {
            background: var(--gradient-2);
            color: white;
            padding: 5rem 2rem;
            text-align: center;
        }

        .cta-button {
            display: inline-block;
            background: white;
            color: var(--primary-color);
            padding: 1rem 2.5rem;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .cta-button.secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .cta-button.secondary:hover {
            background: white;
            color: var(--primary-color);
        }

        /* Footer */
        footer {
            background: var(--dark-bg);
            color: var(--text-light);
            padding: 3rem 2rem;
            text-align: center;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-light);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .parallax-content {
                padding: 2rem;
                margin: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <div class="nav-container" id="navbar">
        <nav>
            <div class="logo">Layer 8 Web Services</div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#architecture">Architecture</a></li>
                <li><a href="#usage">Usage</a></li>
                <li><a href="#docs">Documentation</a></li>
            </ul>
        </nav>
    </div>

    <!-- Full-page Hero Header with Parallax -->
    <section id="home" class="hero-header parallax-container">
        <!-- Background Layer -->
        <div class="parallax-layer parallax-bg"></div>

        <!-- Network Illustration -->
        <svg class="illustration-network" viewBox="0 0 1440 800" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#00a8ff;stop-opacity:0.3" />
                    <stop offset="100%" style="stop-color:#00d4aa;stop-opacity:0.3" />
                </linearGradient>
            </defs>
            <!-- Network nodes and connections -->
            <circle cx="100" cy="100" r="5" fill="url(#grad1)"/>
            <circle cx="300" cy="200" r="5" fill="url(#grad1)"/>
            <circle cx="500" cy="150" r="5" fill="url(#grad1)"/>
            <circle cx="700" cy="300" r="5" fill="url(#grad1)"/>
            <circle cx="900" cy="250" r="5" fill="url(#grad1)"/>
            <circle cx="1100" cy="400" r="5" fill="url(#grad1)"/>
            <circle cx="1300" cy="350" r="5" fill="url(#grad1)"/>
            <circle cx="200" cy="400" r="5" fill="url(#grad1)"/>
            <circle cx="600" cy="500" r="5" fill="url(#grad1)"/>
            <circle cx="1000" cy="600" r="5" fill="url(#grad1)"/>

            <line x1="100" y1="100" x2="300" y2="200" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
            <line x1="300" y1="200" x2="500" y2="150" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
            <line x1="500" y1="150" x2="700" y2="300" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
            <line x1="700" y1="300" x2="900" y2="250" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
            <line x1="900" y1="250" x2="1100" y2="400" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
            <line x1="1100" y1="400" x2="1300" y2="350" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
            <line x1="200" y1="400" x2="600" y2="500" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
            <line x1="600" y1="500" x2="1000" y2="600" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
            <line x1="300" y1="200" x2="600" y2="500" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
            <line x1="700" y1="300" x2="1000" y2="600" stroke="url(#grad1)" stroke-width="1" opacity="0.5"/>
        </svg>

        <!-- Floating Illustrations -->
        <svg class="illustration-float illustration-1" width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="20" y="20" width="60" height="60" rx="10" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
            <circle cx="50" cy="50" r="15" fill="rgba(255,255,255,0.2)"/>
        </svg>

        <svg class="illustration-float illustration-2" width="80" height="80" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
            <polygon points="40,10 70,30 70,60 40,80 10,60 10,30" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
        </svg>

        <svg class="illustration-float illustration-3" width="90" height="90" viewBox="0 0 90 90" xmlns="http://www.w3.org/2000/svg">
            <path d="M45 10 L80 45 L45 80 L10 45 Z" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
            <circle cx="45" cy="45" r="10" fill="rgba(255,255,255,0.2)"/>
        </svg>

        <!-- Hero Content -->
        <div class="hero-content">
            <h1 class="hero-title">Layer 8 Web Services</h1>
            <p class="hero-subtitle">Advanced Web Infrastructure for Distributed Systems</p>
            <p style="font-size: 1.1rem; margin-bottom: 2rem; opacity: 0.9;">
                Go-based REST/GraphQL server, clients, and SNI-based reverse proxy for the Layer 8 Framework
            </p>
            <a href="#features" class="cta-button">Explore Features</a>
            <a href="https://github.com/saichler/l8web" class="cta-button secondary">View on GitHub</a>
        </div>
    </section>

    <!-- Recent Updates Section -->
    <section style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 3rem 2rem;">
        <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
            <h2 style="font-size: 2.5rem; margin-bottom: 2rem; color: var(--primary-color);">
                Recent Updates (2025)
            </h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; text-align: left;">
                <div style="background: white; padding: 1.5rem; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); border-left: 4px solid var(--primary-color);">
                    <h3 style="color: var(--primary-color); margin-bottom: 0.5rem;">GraphQL Client</h3>
                    <p style="color: #6c757d;">Full GraphQL support with query/mutation operations, variables, and Protocol Buffer mapping</p>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); border-left: 4px solid var(--secondary-color);">
                    <h3 style="color: var(--secondary-color); margin-bottom: 0.5rem;">API Key Authentication</h3>
                    <p style="color: #6c757d;">Machine-to-machine auth with custom headers (X-USER-ID, X-API-KEY) for REST and GraphQL</p>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); border-left: 4px solid var(--accent-color);">
                    <h3 style="color: var(--accent-color); margin-bottom: 0.5rem;">Two-Factor Authentication</h3>
                    <p style="color: #6c757d;">TOTP-based 2FA with QR code setup and verification endpoints</p>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); border-left: 4px solid var(--primary-color);">
                    <h3 style="color: var(--primary-color); margin-bottom: 0.5rem;">SNI-Based Reverse Proxy</h3>
                    <p style="color: #6c757d;">Multi-domain, multi-port SSL routing with dynamic certificate selection</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section with Parallax -->
    <section id="features" class="features-container">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h2 style="font-size: 3rem; margin-bottom: 1rem; background: var(--gradient-1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                Core Features
            </h2>
            <p style="font-size: 1.2rem; color: #6c757d; max-width: 800px; margin: 0 auto;">
                Built for performance, security, and scalability in distributed environments
            </p>
        </div>

        <div class="features-grid">
            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                    <rect x="10" y="15" width="40" height="30" rx="3" fill="none" stroke="#00a8ff" stroke-width="2"/>
                    <path d="M20 25 L30 35 L40 25" fill="none" stroke="#00d4aa" stroke-width="2"/>
                    <circle cx="30" cy="30" r="3" fill="#00a8ff"/>
                </svg>
                <h3>RESTful API Server</h3>
                <p>Full HTTP REST server with GET, POST, PUT, PATCH, DELETE support. Native Protocol Buffers integration via protojson with automatic serialization.</p>
            </div>

            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                    <path d="M30 10 L30 50 M15 25 L30 10 L45 25" fill="none" stroke="#00a8ff" stroke-width="2"/>
                    <rect x="20" y="40" width="20" height="10" rx="2" fill="#00d4aa"/>
                </svg>
                <h3>SNI-Based Reverse Proxy</h3>
                <p>Multi-domain reverse proxy with TLS Server Name Indication for dynamic certificate selection. Multi-port support (443, 14443, 9092, etc.).</p>
            </div>

            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="30" cy="30" r="20" fill="none" stroke="#00a8ff" stroke-width="2"/>
                    <path d="M30 20 L30 35 M25 30 L35 30" stroke="#00d4aa" stroke-width="2"/>
                    <circle cx="30" cy="30" r="3" fill="#00a8ff"/>
                </svg>
                <h3>Service Discovery</h3>
                <p>Automatic service registration and discovery via Layer 8 VNet integration. Multicast-based endpoint discovery for seamless distributed communication.</p>
            </div>

            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                    <rect x="15" y="15" width="30" height="30" rx="5" fill="none" stroke="#00a8ff" stroke-width="2"/>
                    <path d="M25 25 L35 35 M35 25 L25 35" stroke="#00d4aa" stroke-width="2"/>
                </svg>
                <h3>Multi-Layer Authentication</h3>
                <p>Bearer token auth with automatic refresh, API key auth (X-USER-ID, X-API-KEY headers), and TOTP-based Two-Factor Authentication with QR setup.</p>
            </div>

            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                    <rect x="10" y="20" width="15" height="20" rx="2" fill="#00a8ff"/>
                    <rect x="35" y="20" width="15" height="20" rx="2" fill="#00d4aa"/>
                    <path d="M25 30 L35 30" stroke="#00a8ff" stroke-width="2"/>
                </svg>
                <h3>REST Client</h3>
                <p>Full-featured HTTP/HTTPS client with connection pooling, GZIP compression, retry logic (5 attempts, 5s backoff), and certificate pinning support.</p>
            </div>

            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="30" cy="30" r="20" fill="none" stroke="#00a8ff" stroke-width="2"/>
                    <path d="M20 30 Q30 20 40 30 Q30 40 20 30" fill="#00d4aa" opacity="0.5"/>
                    <circle cx="25" cy="25" r="3" fill="#00a8ff"/>
                    <circle cx="35" cy="25" r="3" fill="#00a8ff"/>
                    <circle cx="30" cy="35" r="3" fill="#00a8ff"/>
                </svg>
                <h3>GraphQL Client</h3>
                <p>Full GraphQL client with query/mutation support, variable handling, comprehensive error parsing, and automatic Protocol Buffer response mapping.</p>
            </div>

            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                    <rect x="15" y="20" width="30" height="25" rx="3" fill="none" stroke="#00a8ff" stroke-width="2"/>
                    <circle cx="25" cy="30" r="3" fill="#00d4aa"/>
                    <circle cx="35" cy="30" r="3" fill="#00d4aa"/>
                    <path d="M25 38 L35 38" stroke="#00a8ff" stroke-width="2"/>
                    <path d="M15 15 L45 15" stroke="#00d4aa" stroke-width="2"/>
                </svg>
                <h3>TLS/HTTPS Security</h3>
                <p>Built-in SSL/TLS with automatic certificate generation using Layer 8 utilities. Custom CA support and certificate pinning for enhanced security.</p>
            </div>

            <div class="feature-card">
                <svg class="feature-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="20" cy="20" r="5" fill="#00a8ff"/>
                    <circle cx="40" cy="20" r="5" fill="#00a8ff"/>
                    <circle cx="30" cy="40" r="5" fill="#00d4aa"/>
                    <path d="M20 20 L30 40 L40 20" fill="none" stroke="#00a8ff" stroke-width="1" opacity="0.5"/>
                </svg>
                <h3>Layer 8 Integration</h3>
                <p>Deep VNic integration for distributed communication. Proximity-based routing, plugin system with hot-reload, and cross-VNet token mapping.</p>
            </div>
        </div>
    </section>

    <!-- Architecture Section with Parallax Background -->
    <section id="architecture" class="architecture-section parallax-section">
        <div class="architecture-content">
            <h2 style="font-size: 3rem; text-align: center; margin-bottom: 3rem;">System Architecture</h2>

            <div class="architecture-diagram">
                <pre>
Layer 8 Web Services Architecture
=================================================================

+-------------------------------------------------------------+
|                  Reverse Proxy (SNI-based)                   |
|            Multi-domain SSL termination & routing            |
+-------------+-------------------------------+---------------+
              |                               |
    +---------v----------+          +--------v----------+
    |   REST Server      |          |   REST Server      |
    |  +==============+  |          |  +==============+  |
    |  | Service      |  |          |  | Service      |  |
    |  | Handler      |  |          |  | Handler      |  |
    |  +--------------+  |          |  +--------------+  |
    |  | Auth Layer   |  |          |  | Auth Layer   |  |
    |  | Bearer/API/  |  |          |  | Bearer/API/  |  |
    |  | TFA          |  |          |  | TFA          |  |
    |  +--------------+  |          |  +--------------+  |
    |  | WebService   |  |          |  | WebService   |  |
    |  | Endpoints    |  |          |  | Endpoints    |  |
    |  +--------------+  |          |  +--------------+  |
    |  | Layer 8 VNic |  |          |  | Layer 8 VNic |  |
    |  +==============+  |          |  +==============+  |
    +--------------------+          +--------------------+
              |                               |
    +---------v-------------------------------v-----------+
    |              Layer 8 Network Overlay                 |
    |        (Service Discovery & Message Routing)         |
    +------------------------------------------------------+
              |                               |
    +---------v----------+          +--------v----------+
    |   REST Client      |          |  GraphQL Client    |
    |  * Bearer Auth     |          |  * Query/Mutation  |
    |  * API Key Auth    |          |  * Variables       |
    |  * GZIP Compress   |          |  * Error Handling  |
    |  * Retry Logic     |          |  * Proto Mapping   |
    +--------------------+          +--------------------+

Key Components:
================================================================
* Reverse Proxy: SNI-based TLS with multi-domain/port routing
* REST Server: HTTP/HTTPS with Protocol Buffers
* Service Handler: Request routing via Layer 8 VNet
* Auth Layer: Bearer tokens, API keys, Two-Factor Auth
* WebService: /auth, /register, /tfaSetup, /captcha endpoints
* REST Client: Full HTTP client with retry & compression
* GraphQL Client: Query/mutation with variables support
* Layer 8 VNic: Proximity-based distributed communication
                </pre>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 3rem;">
                <div style="background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 15px; backdrop-filter: blur(10px);">
                    <h3 style="margin-bottom: 1rem;">High Performance</h3>
                    <p>Connection pooling, GZIP compression, efficient Protocol Buffer serialization, and automatic retry with exponential backoff.</p>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 15px; backdrop-filter: blur(10px);">
                    <h3 style="margin-bottom: 1rem;">Enterprise Security</h3>
                    <p>Multi-layer authentication (Bearer, API Key, TFA), certificate pinning, CAPTCHA support, and cross-VNet token mapping.</p>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 15px; backdrop-filter: blur(10px);">
                    <h3 style="margin-bottom: 1rem;">Scalability</h3>
                    <p>Horizontal scaling with automatic service discovery, proximity-based routing, and plugin system with hot-reload capability.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Usage Examples Section -->
    <section id="usage" class="parallax-section" style="background: #f8f9fa; min-height: auto; padding: 5rem 2rem;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <h2 style="text-align: center; font-size: 3rem; margin-bottom: 3rem; background: var(--gradient-1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                Quick Start Examples
            </h2>

            <div class="code-tabs">
                <div class="tab-buttons">
                    <button class="tab-button active" onclick="showTab('server')">REST Server</button>
                    <button class="tab-button" onclick="showTab('client')">REST Client</button>
                    <button class="tab-button" onclick="showTab('graphql')">GraphQL Client</button>
                    <button class="tab-button" onclick="showTab('apikey')">API Key Auth</button>
                    <button class="tab-button" onclick="showTab('tfa')">Two-Factor Auth</button>
                    <button class="tab-button" onclick="showTab('service')">Service Registration</button>
                </div>

                <div id="server" class="tab-content active">
                    <h3 style="margin-bottom: 1rem;">Creating a REST Server</h3>
                    <div class="code-block">
import (
    "github.com/saichler/l8web/go/web/server"
)

// Configure the server
config := &server.RestServerConfig{
    Host:           "localhost",
    Port:           8080,
    Authentication: true,        // Enable authentication
    CertName:       "server",    // Auto-generate SSL cert if missing
    Prefix:         "/api/v1/",
}

// Create the server
srv, err := server.NewRestServer(config)
if err != nil {
    log.Fatal(err)
}

// Register web services with Layer 8 VNic
srv.RegisterWebService(webService, vnic)

// Start the server (blocking)
go srv.Start()
                    </div>
                </div>

                <div id="client" class="tab-content">
                    <h3 style="margin-bottom: 1rem;">REST Client with Bearer Token</h3>
                    <div class="code-block">
import (
    "github.com/saichler/l8web/go/web/client"
)

// Configure client with bearer token authentication
config := &client.RestClientConfig{
    Host:          "localhost",
    Port:          8080,
    Https:         true,
    CertFileName:  "ca.crt",
    TokenRequired: true,
    Prefix:        "/api/v1/",
    AuthInfo: &client.RestAuthInfo{
        NeedAuth:   true,
        BodyType:   "AuthRequest",
        UserField:  "username",
        PassField:  "password",
        RespType:   "AuthResponse",
        TokenField: "token",
        AuthPath:   "/auth",
    },
}

// Create the client
restClient, err := client.NewRestClient(config, resources)
if err != nil {
    log.Fatal(err)
}

// Authenticate (obtains and stores bearer token)
err = restClient.Auth("myuser", "mypassword")

// Make authenticated requests
response, err := restClient.GET("/users", "UserList", "", "", nil)
response, err = restClient.POST("/users", "User", "", "", newUser)
response, err = restClient.DELETE("/users/123", "", "", "", nil)
                    </div>
                </div>

                <div id="graphql" class="tab-content">
                    <h3 style="margin-bottom: 1rem;">GraphQL Client Usage</h3>
                    <div class="code-block">
import (
    "github.com/saichler/l8web/go/web/gclient"
)

// Configure GraphQL client
config := &gclient.GraphQLClientConfig{
    Host:     "api.example.com",
    Port:     443,
    Https:    true,
    Endpoint: "/graphql",
    AuthInfo: &gclient.GraphQLAuthInfo{
        IsAPIKey: true,
        ApiUser:  "app-client-001",
        ApiKey:   "sk-1234567890abcdef",
    },
}

// Create the client
gqlClient, err := gclient.NewGraphQLClient(config, resources)

// Execute a GraphQL query with variables
query := `
    query GetUser($id: ID!) {
        user(id: $id) {
            id
            name
            email
            posts { title content }
        }
    }
`
variables := map[string]interface{}{"id": "user123"}
response, err := gqlClient.Query(query, variables, "UserResponse", "user")

// Execute a GraphQL mutation
mutation := `
    mutation CreatePost($input: PostInput!) {
        createPost(input: $input) {
            id
            title
            createdAt
        }
    }
`
variables = map[string]interface{}{
    "input": map[string]interface{}{
        "title":    "New Post",
        "content":  "Post content here",
        "authorId": "user123",
    },
}
response, err = gqlClient.Mutate(mutation, variables, "PostResponse", "createPost")
                    </div>
                </div>

                <div id="apikey" class="tab-content">
                    <h3 style="margin-bottom: 1rem;">API Key Authentication</h3>
                    <div class="code-block">
import (
    "github.com/saichler/l8web/go/web/client"
    "github.com/saichler/l8web/go/web/gclient"
)

// REST Client with API Key
restConfig := &client.RestClientConfig{
    Host:  "api.example.com",
    Port:  443,
    Https: true,
    AuthInfo: &client.RestAuthInfo{
        IsAPIKey: true,
        ApiUser:  "app-client-001",      // Sent as X-USER-ID header
        ApiKey:   "sk-1234567890abcdef", // Sent as X-API-KEY header
    },
}

restClient, err := client.NewRestClient(restConfig, resources)
// All requests automatically include API key headers:
// X-USER-ID: app-client-001
// X-API-KEY: sk-1234567890abcdef

// GraphQL Client with API Key
gqlConfig := &gclient.GraphQLClientConfig{
    Host:     "api.example.com",
    Port:     443,
    Https:    true,
    Endpoint: "/graphql",
    AuthInfo: &gclient.GraphQLAuthInfo{
        IsAPIKey: true,
        ApiUser:  "app-client-001",
        ApiKey:   "sk-1234567890abcdef",
    },
}

gqlClient, err := gclient.NewGraphQLClient(gqlConfig, resources)

// Make authenticated requests
response, err := restClient.GET("/protected/data", "DataResponse", "", "", nil)
                    </div>
                </div>

                <div id="tfa" class="tab-content">
                    <h3 style="margin-bottom: 1rem;">Two-Factor Authentication Flow</h3>
                    <div class="code-block">
// Built-in WebService endpoints for Two-Factor Authentication

// 1. Setup TFA (returns QR code URL and secret)
POST /tfaSetup
Headers: Authorization: Bearer {token}
Response: {
    "qrCodeUrl": "otpauth://totp/...",
    "secret": "BASE32SECRET"
}

// 2. Verify TFA setup with TOTP code from authenticator app
POST /tfaSetupVerify
Headers: Authorization: Bearer {token}
Body: { "code": "123456" }
Response: { "success": true }

// 3. Login with TFA enabled
POST /auth
Body: {
    "username": "user@example.com",
    "password": "password123",
    "tfaCode": "123456"  // From authenticator app
}
Response: { "token": "bearer-token-here" }

// Additional built-in endpoints:
// GET  /captcha   - Get CAPTCHA challenge for registration
// POST /register  - Register new user with CAPTCHA verification
// GET  /registry  - Access type registry information
                    </div>
                </div>

                <div id="service" class="tab-content">
                    <h3 style="margin-bottom: 1rem;">Service Registration with Layer 8</h3>
                    <div class="code-block">
// Register a web service handler type with Layer 8
webNic.Resources().Services().RegisterServiceHandlerType(
    &server.WebService{},
)

// Activate the web service
service, err := webNic.Resources().Services().Activate(
    server.ServiceTypeName,
    ifs.WebService,
    0,  // Auto-assign port
    webNic.Resources(),
    webNic,
    srv,
)

if err != nil {
    log.Fatal(err)
}

// Service is now discoverable via Layer 8 VNet
log.Printf("Service registered: %s at port %d",
    service.ServiceName(), service.Port())

// Discover other services in the network
services := webNic.DiscoverServices("UserService")
for _, svc := range services {
    log.Printf("Found service: %s at %s", svc.ServiceName(), svc.Endpoint())
}

// Token extraction priority on server:
// 1. Authorization header: "Bearer {token}"
// 2. Cookie: "bToken" cookie value
// 3. Query parameter: "?token={token}"
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Documentation Section -->
    <section id="docs" class="parallax-section" style="background: white; min-height: auto; padding: 5rem 2rem;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <h2 style="text-align: center; font-size: 3rem; margin-bottom: 3rem;">Getting Started</h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem;">
                <div class="feature-card">
                    <h3>Installation</h3>
                    <div class="code-block" style="margin-top: 1rem;">
go get github.com/saichler/l8web/go

# With all dependencies
go mod download
                    </div>
                </div>

                <div class="feature-card">
                    <h3>Testing</h3>
                    <div class="code-block" style="margin-top: 1rem;">
# Run full test suite
./go/test.sh

# Run with coverage
cd go
go test -v -coverprofile=cover.html ./...
go tool cover -html=cover.html
                    </div>
                </div>

                <div class="feature-card">
                    <h3>Proxy Deployment</h3>
                    <div class="code-block" style="margin-top: 1rem;">
# Build the reverse proxy
cd go/web/proxy
go build -o l8proxy main/main.go

# Run (requires root for port 443)
sudo ./l8proxy

# Or use the build script for Docker
./build.sh
                    </div>
                </div>

                <div class="feature-card">
                    <h3>Requirements</h3>
                    <ul style="margin-top: 1rem; padding-left: 1.5rem;">
                        <li>Go 1.25.4 or higher</li>
                        <li>Layer 8 Framework Core</li>
                        <li>Protocol Buffers 3.0+</li>
                        <li>Docker (optional for proxy)</li>
                        <li>SSL certificates (auto-generated if not provided)</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>Project Structure</h3>
                    <div class="code-block" style="margin-top: 1rem; font-size: 0.8rem;">
l8web/
+-- go/
|   +-- web/
|   |   +-- server/    # REST Server
|   |   +-- client/    # REST Client
|   |   +-- gclient/   # GraphQL Client
|   |   +-- proxy/     # Reverse Proxy
|   +-- tests/         # Test Suite
+-- web.html           # This page
+-- README.md          # Documentation
                    </div>
                </div>

                <div class="feature-card">
                    <h3>Documentation</h3>
                    <div style="margin-top: 1rem;">
                        <p>Full documentation available at:</p>
                        <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                            <li><a href="https://github.com/saichler/l8web" style="color: var(--primary-color);">GitHub Repository</a></li>
                            <li><a href="https://github.com/saichler/l8web/blob/main/README.md" style="color: var(--primary-color);">README Documentation</a></li>
                            <li><a href="https://github.com/saichler/layer8" style="color: var(--primary-color);">Layer 8 Core Docs</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="cta-section">
        <h2 style="font-size: 2.5rem; margin-bottom: 1rem;">Ready to Build Distributed Web Services?</h2>
        <p style="font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.95;">
            Join the Layer 8 ecosystem and leverage advanced web infrastructure for your distributed systems
        </p>
        <a href="https://github.com/saichler/l8web" class="cta-button">Get Started on GitHub</a>
        <a href="#docs" class="cta-button secondary">Read Documentation</a>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-links">
            <a href="https://github.com/saichler/l8web">GitHub</a>
            <a href="https://github.com/saichler/l8web/issues">Issues</a>
            <a href="https://github.com/saichler/layer8">Layer 8 Framework</a>
            <a href="#docs">Documentation</a>
            <a href="#architecture">Architecture</a>
        </div>
        <p style="margin-bottom: 0.5rem;">Copyright (c) 2025 Sharon Aicler (saichler@gmail.com)</p>
        <p style="margin-bottom: 0.5rem;">Licensed under the Apache License, Version 2.0</p>
        <p style="opacity: 0.8;">Part of the Layer 8 Framework Ecosystem</p>
    </footer>

    <script>
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Parallax scrolling effect
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const parallaxElements = document.querySelectorAll('.parallax-bg');

            parallaxElements.forEach(element => {
                const speed = 0.5;
                element.style.transform = `translateY(${scrolled * speed}px)`;
            });

            // Floating elements parallax
            document.querySelectorAll('.illustration-float').forEach((element, index) => {
                const speed = 0.3 * (index + 1);
                element.style.transform = `translateY(${-scrolled * speed * 0.1}px) rotate(${scrolled * 0.02}deg)`;
            });
        });

        // Intersection Observer for fade-in animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 0.6s ease-out forwards';
                }
            });
        }, observerOptions);

        // Observe feature cards
        document.querySelectorAll('.feature-card').forEach(card => {
            observer.observe(card);
        });
    </script>
</body>
</html>
